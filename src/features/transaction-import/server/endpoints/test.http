# Transaction Import API Tests

# 1. Sign in with email/password first
POST http://localhost:3000/api/auth/sign-in/email
Content-Type: application/json

{
  "email": "your-email@example.com",
  "password": "your-password"
}

###

# 2. Or sign in with Email OTP (Step 1: Send OTP)
POST http://localhost:3000/api/auth/email-otp/send-verification-otp
Content-Type: application/json

{
  "email": "your-email@example.com",
  "type": "sign-in"
}

###

# 3. Step 2: Verify OTP and sign in
POST http://localhost:3000/api/auth/sign-in/email-otp
Content-Type: application/json

{
  "email": "your-email@example.com",
  "otp": "12345678"
}

###

# 4. Get import files (with your actual session token)
GET http://localhost:3000/api/transaction-import/files
Cookie: auth_session=FFqqpKuk7KChEjfBVBx4IJUrQ2gUZe1z.w4RkCTxbaGTA6l3AdMNXEgBsT2E4C3FLhvE3LNEoutg%3D

###

# 5. Import from S3
POST http://localhost:3000/api/transaction-import/files/from-s3
Cookie: auth_session=FFqqpKuk7KChEjfBVBx4IJUrQ2gUZe1z.w4RkCTxbaGTA6l3AdMNXEgBsT2E4C3FLhvE3LNEoutg%3D
Content-Type: application/json

{
  "s3Key": "test-file.csv",
  "fileName": "test-file.csv"
}

###

# 6. Upload file directly
POST http://localhost:3000/api/transaction-import/files
Cookie: auth_session=FFqqpKuk7KChEjfBVBx4IJUrQ2gUZe1z.w4RkCTxbaGTA6l3AdMNXEgBsT2E4C3FLhvE3LNEoutg%3D
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="test.csv"
Content-Type: text/csv

Date,Amount,Description
2024-01-01,100.00,Test transaction
------WebKitFormBoundary7MA4YWxkTrZu0gW--

###
